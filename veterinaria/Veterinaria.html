<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agenda Posh Posh</title>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" rel="stylesheet">
  <link rel="stylesheet" href="estilos.css">
</head>
<body>

  <!-- SPLASH SCREEN -->
  <div id="splash">
    <img src="https://i.ibb.co/dF6tyVF/poshposh.jpg" alt="Logo Posh Posh">
  </div>
  
  <!-- CITAS DEL DÍA -->
  <div id="daily-appointments">
    <h2 id="current-date">📅 Cargando fecha...</h2>
    <ul id="appointments-list"></ul>
    <div class="appointment-buttons">
      <button id="print-btn" onclick="window.print()">🖨️ Imprimir</button>
      <button id="show-btn" onclick="mostrarCitasBonitas()">👁️ Mostrar</button>
      <button id="start-btn" onclick="comenzar()">🚀 Comenzar</button>
    </div>
  </div>

  <!-- CALENDARIO -->
  <div id="calendar-container">
    <header>
      <img src="https://i.ibb.co/dF6tyVF/poshposh.jpg" alt="Logo">
      <h1>Agenda Veterinaria - Posh Posh</h1>
      <nav>
        <ul class="menu-nav">
          <!-- Cliente -->
          <li class="blob-item" onclick="cargarYMostrarModal('Clientes.html','modalNuevoCliente')">
            <div class="blob-button">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 852 880">
                <defs><filter id="goo"><feGaussianBlur in="SourceGraphic" stdDeviation="8" result="blur"/><feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 25 -20"/></filter></defs>
                <g filter="url(#goo)">
                  <rect class="blob-bg" x="284" y="301" width="284" height="284"></rect>
                  <!-- path lines -->
                  <path class="blob-line" d="M350,509 L350,628.509414"/>
                  <path class="blob-line" d="M510,512 L644.5,512"/>
                  <!-- más líneas... -->
                </g>
              </svg>
              <span class="blob-label">Cliente</span>
            </div>
          </li>
          <!-- Historial -->
          <li class="blob-item" onclick="cargarYMostrarModal('Historial.html','modalHistorial')">
            <div class="blob-button">
              <!-- mismo SVG -->
              <span class="blob-label">Historial</span>
            </div>
          </li>
          <!-- Vacuna -->
          <li class="blob-item" onclick="cargarYMostrarModal('Vacunas.html','modalVacunas')">
            <div class="blob-button">
              <!-- mismo SVG -->
              <span class="blob-label">Vacuna</span>
            </div>
          </li>
          <!-- Tienda -->
          <li class="blob-item" onclick="cargarYMostrarModal('Tienda.html','modalTienda')">
            <div class="blob-button">
              <!-- mismo SVG -->
              <span class="blob-label">Tienda</span>
            </div>
          </li>
          <!-- Estética -->
          <li class="blob-item" onclick="cargarYMostrarModal('Estetica.html','modalEstetica')">
            <div class="blob-button">
              <!-- mismo SVG -->
              <span class="blob-label">Estética</span>
            </div>
          </li>
        </ul>
      </nav>
    </header>
    <div id="calendar"></div>
  </div>

  <div id="modales-container"></div>

  <!-- MODAL NUEVA CITA -->
  <div id="modalNuevaCita" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">📅 Agendar nueva cita</h3>
        <span class="close" onclick="cerrarModal('modalNuevaCita')">&times;</span>
      </div>
      <div class="modal-form">
        <div class="form-group">
          <label>🐶 Mascota:</label>
          <input type="text" id="mascotaInput" onblur="verificarMascotaExistente()" />
        </div>
        <div id="preguntaDueno" class="form-group" style="display:none;">
          <p>¿El dueño es <strong><span id="duenoSugerido"></span></strong>?</p>
          <button onclick="usarDuenoSugerido()">✅ Sí</button>
          <button onclick="pedirNuevoDueno()">❌ No</button>
        </div>
        <div id="campoNuevoDueno" class="form-group" style="display:none;">
          <label>👤 Dueño:</label>
          <input type="text" id="duenoInput" />
        </div>
        <div class="form-group"><label>📋 Motivo:</label><input type="text" id="motivoInput" /></div>
        <div class="form-group"><label>🕐 Hora:</label><input type="time" id="horaInput" /></div>
        <div class="form-group"><label>📌 Estatus:</label><select id="estatusInput"><option>Activa</option><option>Cancelada</option></select></div>
        <div class="form-group"><label>📝 Notas:</label><textarea id="notasInput"></textarea></div>
        <div class="form-group"><label>💲 Costo:</label><input type="number" id="costoInput" /></div>
        <div class="btn-container">
          <button class="btn btn-primary" onclick="guardarNuevaCita()">💾 Guardar</button>
          <button class="btn btn-secondary" onclick="cerrarModal('modalNuevaCita')">❌ Cancelar</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <!-- Inclusión del JS de modales y blob buttons -->
  <?!= include('script'); ?>
</body>
</html>