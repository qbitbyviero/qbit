<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agenda Posh Posh</title>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" rel="stylesheet">
  <link rel="stylesheet" href="estilos.css">
</head>
<body>

  <!-- [SECCIÓN] SPLASH SCREEN CON SONIDO -->
  <div id="splash">
    <img src="https://i.ibb.co/dF6tyVF/poshposh.jpg" alt="Logo Posh Posh">
    <audio id="barkSound" src="https://www.soundjay.com/mechanical/sounds/bark-01.mp3" preload="auto"></audio>
  </div>
  
  <!-- [SECCIÓN] CITAS DEL DÍA -->
  <div id="daily-appointments">
    <h2 id="current-date">📅 Cargando fecha...</h2>
    <ul id="appointments-list"></ul>
    <div class="appointment-buttons">
      <button id="print-btn" onclick="window.print()">🖨️ Imprimir</button>
      <button id="show-btn" onclick="mostrarCitasBonitas()">👁️ Mostrar</button>
      <button id="start-btn" onclick="comenzar()">🚀 Comenzar</button>

    </div>
  </div>

  <!-- [SECCIÓN] CALENDARIO -->
  <div id="calendar-container">
    <header>
      <img src="https://i.ibb.co/dF6tyVF/poshposh.jpg" alt="Logo">
      <h1>Agenda Veterinaria - Posh Posh</h1>
      <nav>
        <ul class="menu-nav">
          <li class="dropdown">
            <a href="#">Cliente ⬇</a>
            <ul class="submenu">
              <li><a href="#" onclick="abrirModal('modalNuevoCliente'); return false;">🐾 Nuevo</a></li>
              <li><a href="#" onclick="abrirModal('modalExistente'); return false;">🔎 Existente</a></li>
            </ul>
          </li>
      
          <li><a href="#" onclick="abrirModal('modalHistorial'); return false;">📖 Historial</a></li>
          <li><a href="#" onclick="abrirVacuna(); return false;">💉 Vacuna</a></li>
          <li><a href="#" onclick="abrirTienda(); return false;">🛍️ Tienda</a></li>
          <li><a href="#" onclick="abrirEstetica(); return false;">✂️ Estética</a></li>
        </ul>
      </nav>
    </header>
    <div id="calendar"></div>
  </div>
 <!-- Modal de Nuevo Cliente -->
<div id="modalNuevoCliente" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title">Nuevo Cliente</h3>
      <span class="close" onclick="cerrarModal('modalNuevoCliente')">&times;</span>
    </div>
    <form id="formNuevoCliente" class="modal-form" onsubmit="return guardarCliente(event)">
      <div class="form-row">
        <div class="form-group">
          <label for="nombreDueno">Nombre del Dueño</label>
          <input type="text" id="nombreDueno" required>
        </div>
        <div class="form-group">
          <label for="telefono">Teléfono 📱</label>
          <input type="tel" id="telefono" required>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="direccion">Dirección 📍</label>
          <input type="text" id="direccion" required>
        </div>
        <div class="form-group">
          <label for="correo">Correo 📧</label>
          <input type="email" id="correo" required>
        </div>
      </div>
      
      <input type="hidden" id="idMascota">
      
      <div class="form-row">
        <div class="form-group">
          <label for="nombreMascota">Nombre de Mascota 🐶/🐱</label>
          <input type="text" id="nombreMascota" required>
        </div>
        <div class="form-group">
          <label for="edad">Edad 🎂</label>
          <input type="number" id="edad" min="0" required>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="peso">Peso ⚖️ (kg)</label>
          <input type="number" id="peso" step="0.1" min="0" required>
        </div>
        <div class="form-group">
          <label for="sexo">Sexo</label>
          <select id="sexo" required>
            <option value="">Seleccionar...</option>
            <option value="Macho">Macho 💙</option>
            <option value="Hembra">Hembra ❤️</option>
          </select>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="especieSelect">Especie 🦄</label>
          <select id="especieSelect" onchange="actualizarRazas()" required>
            <option value="">Seleccionar...</option>
            <option value="Perro">🐶 Perro</option>
            <option value="Gato">🐱 Gato</option>
            <option value="Conejo">🐰 Conejo</option>
            <option value="Ave">🦜 Ave</option>
            <option value="Hámster">🐹 Hámster</option>
            <option value="Tortuga">🐢 Tortuga</option>
            <option value="Reptil">🦎 Reptil</option>
          </select>
        </div>
        <div class="form-group">
          <label for="raza">Raza 🐕/🐈</label>
          <select id="raza" required>
            <option value="">Seleccione especie primero</option>
          </select>
        </div>
      </div>
      
      <div class="btn-container">
        <button type="submit" class="btn btn-primary">Guardar</button>
        <button type="button" class="btn btn-secondary" onclick="cerrarModal('modalNuevoCliente')">Cancelar</button>
      </div>
    </form>
  </div>
</div>
     <!-- Modal Cliente Existente -->
<div id="modalExistente" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title">Buscar Cliente Existente</h3>
      <span class="close" onclick="cerrarModal('modalExistente')">&times;</span>
    </div>
    
    <div class="modal-form">
      <div class="form-group">
        <label>Buscar por:</label>
        <select id="tipoBusqueda">
          <option value="mascota">Nombre de mascota</option>
          <option value="dueno">Nombre del dueño</option>
          <option value="telefono">Teléfono</option>
        </select>
      </div>
      
      <div class="form-group">
        <input type="text" id="terminoBusqueda" placeholder="Ej. Luna, Juan Pérez, 5551234567">
      </div>
      
      <button class="btn btn-primary" onclick="buscarCliente()">🔍 Buscar</button>
      
      <div id="resultadosBusqueda" style="margin-top: 20px; display: none;">
        <h4>Resultados:</h4>
        <div id="listaClientes" style="max-height: 300px; overflow-y: auto;"></div>
      </div>
      
      <div class="btn-container" style="margin-top: 20px;">
        <button class="btn btn-secondary" onclick="cerrarModal('modalExistente')">Cancelar</button>
      </div>
    </div>
  </div>
</div>

  <!-- [SECCIÓN] SECCIONES PARA EL MENÚ -->
  <!-- Modal Historial -->
<div id="modalHistorial" class="modal">
  <div class="modal-content" style="max-width: 1000px;">
    <div class="modal-header">
      <h3 class="modal-title">📋 Historia Clínica Veterinaria</h3>
      <span class="close" onclick="cerrarModal('modalHistorial')">&times;</span>
    </div>
    
    <div class="modal-body">
      <div class="section-title">📑 Información General</div>
      <div class="form-row">
        <div class="form-group">
          <label>Número Historia Clínica</label>
          <input type="text" name="num_historia">
        </div>
        <div class="form-group">
          <label>Fecha</label>
          <input type="date" name="fecha">
        </div>
        <div class="form-group">
          <label>Cliente ID</label>
          <input type="text" name="cliente_id">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Nombre Dueño</label>
          <input type="text" name="nombre_dueno">
        </div>
        <div class="form-group">
          <label>Dirección</label>
          <input type="text" name="direccion">
        </div>
        <div class="form-group">
          <label>Teléfono</label>
          <input type="tel" name="telefono">
        </div>
        <div class="form-group">
          <label>Correo Electrónico</label>
          <input type="email" name="correo">
        </div>
      </div>

      <div class="section-title">🐾 Datos de la Mascota</div>
      <div class="form-row">
        <div class="form-group">
          <label>Nombre Mascota</label>
          <input type="text" name="nombre_mascota">
        </div>
        <div class="form-group">
          <label>Especie</label>
          <select name="especie">
            <option value="">Seleccionar...</option>
            <option value="Perro">🐶 Perro</option>
            <option value="Gato">🐱 Gato</option>
            <option value="Conejo">🐰 Conejo</option>
            <option value="Ave">🦜 Ave</option>
            <option value="Hámster">🐹 Hámster</option>
            <option value="Tortuga">🐢 Tortuga</option>
            <option value="Reptil">🦎 Reptil</option>
          </select>
        </div>
        <div class="form-group">
          <label>Raza</label>
          <input type="text" name="raza">
        </div>
        <div class="form-group">
          <label>Sexo</label>
          <select name="sexo">
            <option value="">Seleccionar...</option>
            <option value="Macho">Macho</option>
            <option value="Hembra">Hembra</option>
          </select>
        </div>
        <div class="form-group">
          <label>Edad</label>
          <input type="text" name="edad" placeholder="Ej. 2 años">
        </div>
        <div class="form-group">
          <label>Peso (kg)</label>
          <input type="number" name="peso" step="0.1">
        </div>
      </div>

      <div class="section-title">🧬 Evaluación Clínica</div>
      <div class="form-row">
        <div class="form-group">
          <label>Temperatura (°C)</label>
          <input type="number" name="temperatura" step="0.1">
        </div>
        <div class="form-group">
          <label>Pulso</label>
          <input type="number" name="pulso">
        </div>
        <div class="form-group">
          <label>Frecuencia Cardíaca</label>
          <input type="number" name="cardiaca">
        </div>
        <div class="form-group">
          <label>Frecuencia Respiratoria</label>
          <input type="number" name="respiratoria">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Estado General</label>
          <select name="estado_general">
            <option value="">Seleccionar...</option>
            <option value="Excelente">Excelente</option>
            <option value="Bueno">Bueno</option>
            <option value="Regular">Regular</option>
            <option value="Grave">Grave</option>
          </select>
        </div>
        <div class="form-group">
          <label>Tiempo de Llenado Capilar (seg)</label>
          <input type="number" name="capilar" step="0.1">
        </div>
        <div class="form-group">
          <label>Ojos</label>
          <input type="text" name="ojos" placeholder="Ej. Normal, secreción">
        </div>
        <div class="form-group">
          <label>Tegumentario</label>
          <input type="text" name="tegumentario" placeholder="Ej. Piel normal">
        </div>
        <div class="form-group">
          <label>Hidratación</label>
          <select name="hidratacion">
            <option value="">Seleccionar...</option>
            <option value="Normal">Normal</option>
            <option value="Deshidratación leve">Deshidratación leve</option>
            <option value="Deshidratación moderada">Deshidratación moderada</option>
            <option value="Deshidratación severa">Deshidratación severa</option>
          </select>
        </div>
      </div>

      <div class="section-title">💊 Diagnóstico & Tratamiento</div>
      <div class="form-row">
        <div class="form-group" style="flex: 1 1 100%;">
          <label>Diagnóstico</label>
          <textarea name="diagnostico" rows="4"></textarea>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group" style="flex: 1 1 100%;">
          <label>Tratamiento</label>
          <textarea name="tratamiento" rows="4"></textarea>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group" style="flex: 1 1 100%;">
          <label>Observaciones</label>
          <textarea name="observaciones" rows="3"></textarea>
        </div>
      </div>

      <div class="section-title">💰 Costos</div>
      <div class="form-row">
        <div class="form-group" style="flex: 1 1 70%;">
          <label>Servicios Prestados</label>
          <textarea name="servicios" rows="3"></textarea>
        </div>
        <div class="form-group">
          <label>Costo Total ($)</label>
          <input type="number" name="costo_total" step="0.01">
        </div>
      </div>

      <div class="btn-container" style="margin-top: 30px;">
        <button type="button" class="btn btn-primary" onclick="guardarHistorial()">💾 Guardar</button>
        <button type="button" class="btn btn-secondary" onclick="cerrarModal('modalHistorial')">❌ Cerrar</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal Vacunas -->
  <div id="vacuna-section" style="display:none; padding: 40px; max-width: 1000px; margin: 0 auto;">
    <h2>Registro de Vacunas</h2>
    <p>Aquí irá el contenido de vacunas...</p>
  </div>
<!-- Modal Tienda -->
<div id="modalTienda" class="modal">
  <div class="modal-content tienda">
    <div class="modal-header">
      <h3 class="modal-title">🛍️ Tienda</h3>
      <span class="close" onclick="cerrarModal('modalTienda')">&times;</span>
    </div>
    <div class="modal-body">
      <!-- Contenido -->
      <img src="https://i.ibb.co/dF6tyVF/poshposh.jpg" alt="Logo" 
      style="height:50px; display:block; margin:0 auto 20px;">
 <div class="contenedor-principal">
        <div class="tarjeta-pos">
          <h1 class="titulo-modulo">🛒 Sistema POS Avanzado</h1>
          <div class="controles-venta">
            <div class="input-group">
              <label>🔍 Cliente:</label>
              <select id="selector-cliente">
                <option value="">Venta mostrador</option>
              </select>
            </div>
            <div class="input-group">
              <label>💸 Método de pago:</label>
              <select id="metodo-pago">
                <option value="Efectivo">Efectivo</option>
                <option value="Tarjeta">Tarjeta</option>
                <option value="Transferencia">Transferencia</option>
              </select>
            </div>
            <div class="input-group">
              <label>🎁 Tipo Descuento:</label>
              <select id="tipo-descuento">
                <option value="ninguno">Sin descuento</option>
                <option value="porcentaje">% Descuento</option>
                <option value="monto">Monto fijo (MXN)</option>
                <option value="promocion">Promoción</option>
                <option value="cliente-frecuente">Cliente frecuente</option>
              </select>
            </div>
            <div class="input-group">
              <label>🎁 Valor Descuento:</label>
              <input type="number" id="valor-descuento" value="0" min="0" disabled>
            </div>
            <div class="input-group">
              <label>📝 Observaciones:</label>
              <textarea id="observaciones" rows="2"></textarea>
            </div>
          </div>

          <select id="selector-categoria" class="selector-categorias">
            <option value="todas">📦 Todas las categorías</option>
          </select>

          <div id="contenedor-categorias"></div>
        </div>
      </div>

      <!-- Carrito flotante -->
      <div class="carrito-flotante">
        <div class="carrito-header">
          <h3>🛒 Tu Carrito</h3>
          <span class="total-carrito">$0.00</span>
        </div>
        <div class="carrito-body" id="lista-carrito"></div>
        <div class="total-container">
          <p>Total: $<span id="total-venta">0.00</span></p>
          <button onclick="procesarVenta()" class="boton-guardar">✅ Finalizar Venta</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Estetica -->
  <div id="estetica-section" style="display:none; padding: 40px; max-width: 1000px; margin: 0 auto;">
    <h2>Servicios de Estética</h2>
    <p>Aquí irá el contenido de estética...</p>
  </div>
  <!-- MODAL NUEVA CITA -->
<div id="modalNuevaCita" class="modal">
  <div class="modal-content">
    <h3>📅 Agendar nueva cita</h3>

    <label>🐶 Nombre de la mascota:</label>
    <input type="text" id="mascotaInput" onblur="verificarMascotaExistente()" />

    <div id="preguntaDueno" style="display:none; margin-top: 8px;">
      <p>¿El dueño es <strong><span id="duenoSugerido"></span></strong>?</p>
      <button onclick="usarDuenoSugerido()">✅ Sí</button>
      <button onclick="pedirNuevoDueno()">❌ No</button>
    </div>

    <div id="campoNuevoDueno" style="display:none; margin-top: 10px;">
      <label>👤 Dueño:</label>
      <input type="text" id="duenoInput" />
    </div>

    <label>📋 Motivo:</label>
    <input type="text" id="motivoInput" />

    <label>🕐 Hora:</label>
    <input type="time" id="horaInput" />

    <label>📌 Estatus:</label>
    <select id="estatusInput">
      <option value="Activa">Activa</option>
      <option value="Cancelada">Cancelada</option>
    </select>

    <label>📝 Notas:</label>
    <textarea id="notasInput"></textarea>

    <label>📷 Foto:</label>
    <input type="file" id="fotoInput" accept="image/*" capture="environment" />

    <label>💲 Costo:</label>
    <input type="number" id="costoInput" />

    <div style="margin-top: 10px;">
      <button onclick="guardarNuevaCita()">💾 Guardar</button>
      <button onclick="cerrarModal('modalNuevaCita')">❌ Cancelar</button>
    </div>
  </div>
</div>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script src="script.js"></script>
</body>
</html>